"use strict";!function(){function e(e,t){this.grid=e,this.options=t}function t(e){var t=this.sources.treeview,i=!(!t||!t.viewMakesSense());return i&&e&&(i=e.dataCell.x===t.treeColumnIndex),i}var i={type:"DataSourceTreeview",test:t},n="JSDataSource";e.prototype={constructor:e.prototype.constructor,addPipeTo:function(e){e.addPipe(i,n)},addPipe:function(e,t){var o=this.grid.behavior,a=o.dataModel;t||a.hasOwnProperty("pipeline")||(a.pipeline=a.pipeline.slice()),a.addPipe(i,n),o.setData(e),o.shapeChanged()},setRelation:function(e,t){var i=e&&this.options,n=this.grid.behavior,o=n.dataModel,a=o.sources.treeview,s=a.setRelation(i),r=n.getPrivateState(),c=n.getColumn(a.treeColumnIndex).getProperties();if(s){if(this.editableWas=!!c.editable,c.editable=!1,this.checkboxOnlyRowSelectionsWas=r.checkboxOnlyRowSelections,r.checkboxOnlyRowSelections=!0,t){var l=[a.idColumnIndex,a.parentIdColumnIndex];l.forEach(function(e){var t;n.columns.find(function(i,n){return t=n,i.index===e})&&n.columns.splice(t,1)})}}else c.editable=this.editableWas,r.checkboxOnlyRowSelections=this.checkboxOnlyRowSelectionsWas;return this.grid.selectionModel.clear(),this.grid.clearMouseDown(),o.applyAnalytics(),n.shapeChanged(),s}},window.fin.Hypergrid.TreeView=e}();